{
"version":"1.0",
"code":"--初始设置\ngg.setVisible(false)\nKey = 0\n\n--主函数\nfunction Main0()\n  local DM = gg.choice({\"菜单一\",\"菜单二\",\"菜单三\"},nil,\"请选择\")\n  --记录菜单层\n  Key = 0\n  if DM then\n    _G[\"Main\"..DM]() --调用对应菜单\n   else\n    gg.setVisible(false)\n  end\nend\n\n---------------------------------\n--子菜单区\nfunction Main1()\n  local DM = {\n    '功能1',\n    '功能2',\n    '功能3',\n    '功能4',\n    '记住菜单层',\n  }\n  local menu = gg.multiChoice(DM,nil,'无')\n  if menu == nil then\n    gg.setVisible(false)\n   else\n    --利用循环判断某个选项是否被选中，并执行对应功能\n    for k,v in pairs(menu) do\n      if k ~= #DM then\n        _G[\"C\"..k]() --调用c1、c2等函数\n      end\n    end\n    --判断记录功能是否勾选\n    if menu[#DM] then\n      _G[\"C\"..#DM](1) --记录菜单层\n     else\n      --清理菜单层\n      Key=0\n    end\n  end\nend\n\nfunction Main2()\n  local DM = {\n    '1',\n    '2',\n    '3',\n    '4',\n    '记住菜单层',\n  }\n  local menu = gg.multiChoice(DM,nil,'选择:')\n  if menu == nil then\n    gg.setVisible(false)\n   else\n    --利用循环判断某个选项是否被选中，并执行对应功能\n    for k,v in pairs(menu) do\n      if k ~= #DM then\n        _G[\"C\"..k]() --调用c1、c2等函数\n      end\n    end\n    --判断记录功能是否勾选\n    if menu[#DM] then\n      _G[\"C\"..#DM](1) --记录菜单层\n     else\n      --清理菜单层\n      Key=0\n    end\n  end\nend\n\nfunction Main3()\n  local DM = {\n    '功能一',\n    '功能二',\n    '功能三',\n    '功能四',\n    '记住菜单层',\n  }\n  local menu = gg.multiChoice(DM,nil,'无')\n  if menu == nil then\n    gg.setVisible(false)\n   else\n    --利用循环判断某个选项是否被选中，并执行对应功能\n    for k,v in pairs(menu) do\n      if k ~= #DM then\n        _G[\"C\"..k]() --调用c1、c2等函数\n      end\n    end\n    --判断记录功能是否勾选\n    if menu[#DM] then\n      _G[\"C\"..#DM](1) --记录菜单层\n     else\n      --清理菜单层\n      Key=0\n    end\n  end\nend\n---------------------------------\n\n---------------------------------\n----子功能区----\nfunction C1()\n  --功能内容\n  gg.toast(\"开启成功1\")\nend\n\nfunction C2()\n  gg.toast(\"开启成功2\")\nend\n\nfunction C3()\n  gg.toast(\"开启成功3\")\n  gg.clearResults()\nend\n\nfunction C4()\n  gg.toast(\"开启成功4\")\n  gg.clearResults()\nend\n\nfunction C5(...)\n  --记录菜单层\n  local value = {...}\n  Key=value[1]\n  gg.toast(\"记录成功\")\nend\n---------------------------------\n\n---------------------------------\n--循环功能，用于点击悬浮窗时回调菜单\nwhile true do\n  if gg.isVisible() then\n    gg.setVisible(false)\n    --回调记录\n    _G[\"Main\"..Key]()\n  end\nend\n---------------------------------"
}