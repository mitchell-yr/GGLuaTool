# 插件开发文档

## 注意事项

- 插件是此脚本编辑器的重要功能和独特优势之一
- 此软件所适用的插件必须严格遵循插件格式来制作
- 对于非官方插件，我不能保证其安全性，因为一个插件可能会：

> 包含二进制(.so)文件（这是未来更新计划，旨在兼容c艹），这可能会危害您的计算机

> 对脚本中的字符进行替换，这可能会导致代码错误或丢失（若插件有问题的话）

> 包含自定义函数，这可能会导致已有函数失效或冲突

> 访问互联网（），这可能会导致隐私泄露

因此，请在使用某一插件前排查其安全性，对于非官方插件，我概不负责

- 插件功能属于测试功能，可能会导致不可逆后果，包括但不限于代码丢失，故请谨慎使用，我们概不负责

## 教程

`name`即插件名字
`information`对应插件详情
`version`即版本，无特殊功能，仅作标记 `update`该参数对于一个网址，对应一个更新方式

`highlight`用于标记需要语法高亮的词语，主要用于自定义函数或常量

插件主体主要分为三个部分：

1. match(替换)
2. inject(注入)

部分1`match`主要依靠正则表达式来进行代码批量替换。
这可以用于中文编写lua，例如将`if xxx then`替换为`如果 xxx 那么`
下面是一个实例：

```json
{
"name":"悠然预设函数插件",
"version":1,
"update":"",
"highlight":["密码验证"],
"match": [{"search":"密码验证\\((.*?),(.*?),(.*?\\)*)\\)","replace":"a=gg.prompt({\"请输入密码\"},{\"\"},{\"Text\"}) if a[1] == $1 then $2 else $3 end"}],
"inject":[]
}
```

部分2`inject`主要是在脚本前部注入一些代码。
这可以实现一些额外预制函数，以及在编译时添加防破解防御

** 注意，处理优先级为`inject`>`code`>`replace`
因此，可以在inject部分使用自定义要replace的方法
